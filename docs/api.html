<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kodepos API Indonesia - Interactive Documentation</title>
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@latest/swagger-ui.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --success-color: #28a745;
            --info-color: #17a2b8;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --light-bg: #f8f9fa;
            --dark-bg: #2d3748;
            --text-primary: #333;
            --text-secondary: #6c757d;
            --border-color: #e9ecef;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f7fa;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .header p {
            margin: 0.5rem 0 0 0;
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .realtime-status {
            background: rgba(255,255,255,0.1);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            margin-top: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success-color);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .stats {
            background: var(--light-bg);
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            background-color: rgba(248, 249, 250, 0.95);
        }

        .stats-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .stat-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .api-info {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .api-section {
            margin-bottom: 3rem;
        }

        .api-section h2 {
            color: var(--text-primary);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .endpoint-card {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: all 0.2s;
        }

        .endpoint-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-color: var(--primary-color);
        }

        .endpoint-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .endpoint-method {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.8rem;
            text-transform: uppercase;
            margin-right: 0.5rem;
            color: white;
        }

        .method-get {
            background: var(--success-color);
        }

        .method-post {
            background: var(--info-color);
        }

        .endpoint-path {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: var(--text-primary);
            flex: 1;
            margin-left: 0.5rem;
        }

        .endpoint-description {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .endpoint-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .tab-button {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tab-button:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .tab-button.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .endpoint-examples {
            background: var(--light-bg);
            border-radius: 4px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .code-block {
            background: var(--dark-bg);
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin: 0.5rem 0;
        }

        .try-it-out {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            margin: 0.5rem 0.5rem 0.5rem 0;
            transition: all 0.2s;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .try-it-out:hover {
            background: #5a6fd8;
            transform: translateY(-1px);
        }

        .try-it-out:disabled {
            background: var(--text-secondary);
            cursor: not-allowed;
            transform: none;
        }

        .result-box {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 1rem;
            margin-top: 1rem;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
        }

        .result-box.success {
            border-color: var(--success-color);
            background: rgba(40, 167, 69, 0.1);
        }

        .result-box.error {
            border-color: var(--danger-color);
            background: rgba(220, 53, 69, 0.1);
        }

        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .metric-item {
            text-align: center;
            padding: 0.5rem;
            background: white;
            border-radius: 4px;
            border: 1px solid var(--border-color);
        }

        .metric-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .metric-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        #swagger-ui {
            max-width: 1200px;
            margin: 2rem auto;
        }

        .language-selector {
            margin-bottom: 1rem;
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .lang-btn {
            padding: 0.3rem 0.8rem;
            border: 1px solid var(--border-color);
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
        }

        .lang-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .code-snippet {
            display: none;
        }

        .code-snippet.active {
            display: block;
        }

        .authentication-setup {
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid var(--primary-color);
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .auth-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            background: rgba(255, 193, 7, 0.2);
            color: #856404;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-size: 0.7rem;
            margin-left: 0.5rem;
        }

        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .api-monitor {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            max-width: 300px;
        }

        .monitor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .monitor-content {
            font-size: 0.8rem;
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
                flex-direction: column;
                gap: 0.5rem;
            }

            .stats-container {
                grid-template-columns: repeat(2, 1fr);
            }

            .endpoint-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .api-monitor {
                position: static;
                margin: 1rem;
                max-width: none;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>
            <i class="fas fa-map-marker-alt"></i>
            üáÆüá© Kodepos API Indonesia
        </h1>
        <p>High-performance Indonesian postal code API with global edge distribution</p>
        <div class="realtime-status">
            <div class="status-indicator"></div>
            <span id="realtime-status">Live Status: Checking...</span>
        </div>
    </div>

    <div class="stats">
        <div class="stats-container">
            <div class="stat-item">
                <div class="stat-number">83,761</div>
                <div class="stat-label">Complete Records</div>
            </div>
            <div class="stat-item">
                <div class="stat-number"><100ms</div>
                <div class="stat-label">Response Time</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">200+</div>
                <div class="stat-label">Edge Locations</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">100%</div>
                <div class="stat-label">Backward Compatible</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="uptime-percentage">99.9%</div>
                <div class="stat-label">Uptime</div>
            </div>
        </div>
    </div>

    <div class="api-info">
        <div class="api-section">
            <h2>üîç Quick Start</h2>
            <p style="color: var(--text-secondary); margin-bottom: 2rem;">Start exploring the Kodepos API with these essential endpoints. All examples include complete authentication, error handling, and performance monitoring.</p>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <div>
                        <span class="endpoint-method method-get">GET</span>
                        <span class="endpoint-path">/search?q={query}</span>
                        <span class="auth-badge"><i class="fas fa-lock-open"></i> No Auth</span>
                    </div>
                    <i class="fas fa-search" style="color: var(--primary-color); font-size: 1.5rem;"></i>
                </div>
                <div class="endpoint-description">
                    Search postal codes by location name. <strong>100% compatible with kodepos.vercel.app</strong>. Supports fuzzy matching, partial searches, and autocomplete.
                </div>

                <div class="authentication-setup">
                    <h4><i class="fas fa-shield-alt"></i> Authentication Setup</h4>
                    <p>No authentication required for basic usage. However, for production applications, we recommend using API keys for rate limiting and monitoring.</p>
                </div>

                <div class="endpoint-examples">
                    <div class="language-selector">
                        <button class="lang-btn active" data-lang="curl"><i class="fas fa-terminal"></i> cURL</button>
                        <button class="lang-btn" data-lang="javascript"><i class="fab fa-js"></i> JavaScript</button>
                        <button class="lang-btn" data-lang="python"><i class="fab fa-python"></i> Python</button>
                        <button class="lang-btn" data-lang="php"><i class="fab fa-php"></i> PHP</button>
                        <button class="lang-btn" data-lang="go"><i class="fas fa-code"></i> Go</button>
                        <button class="lang-btn" data-lang="java"><i class="fab fa-java"></i> Java</button>
                    </div>

                    <div class="code-snippet active" data-code="curl">
                        <div class="code-block">curl -X "GET" \
  "https://your-api.workers.dev/search?q=Jakarta" \
  -H "accept: application/json" \
  -H "User-Agent: Kodepos-Docs/1.0"</div>
                    </div>

                    <div class="code-snippet" data-code="javascript">
                        <div class="code-block">// Using Fetch API
const response = await fetch('https://your-api.workers.dev/search?q=Jakarta', {
  method: 'GET',
  headers: {
    'accept': 'application/json',
    'User-Agent': 'Kodepos-Docs/1.0'
  }
});

const data = await response.json();
console.log(data);</div>
                    </div>

                    <div class="code-snippet" data-code="python">
                        <div class="code-block">import requests

url = "https://your-api.workers.dev/search"
params = {
    'q': 'Jakarta'
}
headers = {
    'accept': 'application/json',
    'User-Agent': 'Kodepos-Docs/1.0'
}

response = requests.get(url, params=params, headers=headers)
data = response.json()
print(data)</div>
                    </div>

                    <div class="code-snippet" data-code="php">
                        <div class="code-block">&lt;?php
$url = "https://your-api.workers.dev/search?q=Jakarta";
$headers = [
    "accept: application/json",
    "User-Agent: Kodepos-Docs/1.0"
];

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($ch);
$data = json_decode($response, true);
curl_close($ch);
?&gt;</div>
                    </div>

                    <div class="code-snippet" data-code="go">
                        <div class="code-block">package main

import (
    "fmt"
    "net/http"
    "io/ioutil"
    "encoding/json"
)

func main() {
    url := "https://your-api.workers.dev/search?q=Jakarta"

    req, _ := http.NewRequest("GET", url, nil)
    req.Header.Add("accept", "application/json")
    req.Header.Add("User-Agent", "Kodepos-Docs/1.0")

    client := &http.Client{}
    resp, err := client.Do(req)
    if err != nil {
        panic(err)
    }
    defer resp.Body.Close()

    body, _ := ioutil.ReadAll(resp.Body)
    var data interface{}
    json.Unmarshal(body, &data)
    fmt.Printf("%+v\n", data)
}</div>
                    </div>

                    <div class="code-snippet" data-code="java">
                        <div class="code-block">import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.net.http.HttpResponse.BodyHandlers;
import com.fasterxml.jackson.databind.ObjectMapper;

public class KodeposAPI {
    public static void main(String[] args) throws Exception {
        HttpClient client = HttpClient.newHttpClient();
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create("https://your-api.workers.dev/search?q=Jakarta"))
            .header("accept", "application/json")
            .header("User-Agent", "Kodepos-Docs/1.0")
            .build();

        HttpResponse&lt;String&gt; response = client.send(request, BodyHandlers.ofString());
        ObjectMapper mapper = new ObjectMapper();
        Object data = mapper.readValue(response.body(), Object.class);
        System.out.println(data);
    }
}</div>
                    </div>

                    <button class="try-it-out" onclick="trySearch()">
                        <i class="fas fa-play"></i> Try It Out
                    </button>
                    <button class="try-it-out" onclick="trySearchPerformance()">
                        <i class="fas fa-tachometer-alt"></i> Test Performance
                    </button>
                    <div id="search-result" class="result-box" style="display: none;"></div>
                    <div id="search-performance" class="result-box" style="display: none;"></div>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <div>
                        <span class="endpoint-method method-get">GET</span>
                        <span class="endpoint-path">/detect?latitude={lat}&longitude={lng}</span>
                        <span class="auth-badge"><i class="fas fa-lock-open"></i> No Auth</span>
                    </div>
                    <i class="fas fa-crosshairs" style="color: var(--primary-color); font-size: 1.5rem;"></i>
                </div>
                <div class="endpoint-description">
                    Detect location by coordinates. Returns nearest postal code with distance calculation and reverse geocoding capabilities.
                </div>

                <div class="endpoint-examples">
                    <div class="language-selector">
                        <button class="lang-btn active" data-lang="curl"><i class="fas fa-terminal"></i> cURL</button>
                        <button class="lang-btn" data-lang="javascript"><i class="fab fa-js"></i> JavaScript</button>
                        <button class="lang-btn" data-lang="python"><i class="fab fa-python"></i> Python</button>
                        <button class="lang-btn" data-lang="php"><i class="fab fa-php"></i> PHP</button>
                        <button class="lang-btn" data-lang="go"><i class="fas fa-code"></i> Go</button>
                        <button class="lang-btn" data-lang="java"><i class="fab fa-java"></i> Java</button>
                    </div>

                    <div class="code-snippet active" data-code="curl">
                        <div class="code-block">curl -X "GET" \
  "https://your-api.workers.dev/detect?latitude=-6.2088&longitude=106.8456" \
  -H "accept: application/json"</div>
                    </div>

                    <div class="code-snippet" data-code="javascript">
                        <div class="code-block">// Detect location from coordinates
const coords = { lat: -6.2088, lng: 106.8456 };

const response = await fetch(`https://your-api.workers.dev/detect?latitude=${coords.lat}&longitude=${coords.lng}`, {
  method: 'GET',
  headers: { 'accept': 'application/json' }
});

const data = await response.json();
console.log('Nearest postal code:', data.data?.code);
console.log('Location:', data.data?.village, data.data?.district);
console.log('Distance:', data.data?.distance, 'km');</div>
                    </div>

                    <div class="code-snippet" data-code="python">
                        <div class="code-block"># Reverse geocoding example
import requests

params = {
    'latitude': -6.2088,
    'longitude': 106.8456
}

response = requests.get(
    'https://your-api.workers.dev/detect',
    params=params,
    headers={'accept': 'application/json'}
)

data = response.json()
print(f"Nearest postal code: {data.get('data', {}).get('code')}")
print(f"Location: {data.get('data', {}).get('village')} {data.get('data', {}).get('district')}")
print(f"Distance: {data.get('data', {}).get('distance')} km")</div>
                    </div>

                    <button class="try-it-out" onclick="tryDetect()">
                        <i class="fas fa-play"></i> Try It Out
                    </button>
                    <button class="try-it-out" onclick="tryDetectPerformance()">
                        <i class="fas fa-tachometer-alt"></i> Test Performance
                    </button>
                    <div id="detect-result" class="result-box" style="display: none;"></div>
                    <div id="detect-performance" class="result-box" style="display: none;"></div>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <div>
                        <span class="endpoint-method method-get">GET</span>
                        <span class="endpoint-path">/api/v1/search?{filters}</span>
                        <span class="auth-badge"><i class="fas fa-key"></i> API Key</span>
                    </div>
                    <i class="fas fa-filter" style="color: var(--primary-color); font-size: 1.5rem;"></i>
                </div>
                <div class="endpoint-description">
                    Advanced search with multiple filters. Search by province, city, district, postal code, with pagination and sorting capabilities.
                </div>

                <div class="authentication-setup">
                    <h4><i class="fas fa-shield-alt"></i> Required Authentication</h4>
                    <p>This endpoint requires an API key for rate limiting and usage tracking. Include your API key in the Authorization header:</p>
                    <div class="code-block">Authorization: Bearer your_api_key_here</div>
                </div>

                <div class="endpoint-examples">
                    <div class="language-selector">
                        <button class="lang-btn active" data-lang="curl"><i class="fas fa-terminal"></i> cURL</button>
                        <button class="lang-btn" data-lang="javascript"><i class="fab fa-js"></i> JavaScript</button>
                        <button class="lang-btn" data-lang="python"><i class="fab fa-python"></i> Python</button>
                        <button class="lang-btn" data-lang="php"><i class="fab fa-php"></i> PHP</button>
                        <button class="lang-btn" data-lang="go"><i class="fas fa-code"></i> Go</button>
                        <button class="lang-btn" data-lang="java"><i class="fab fa-java"></i> Java</button>
                    </div>

                    <div class="code-snippet active" data-code="curl">
                        <div class="code-block">curl -X "GET" \
  "https://your-api.workers.dev/api/v1/search?provinsi=DKI%20Jakarta&kota=Jakarta%20Pusat&page=1&limit=10" \
  -H "accept: application/json" \
  -H "Authorization: Bearer your_api_key_here"</div>
                    </div>

                    <div class="code-snippet" data-code="javascript">
                        <div class="code-block">// Advanced search with API key
const API_KEY = 'your_api_key_here';
const params = new URLSearchParams({
    provinsi: 'DKI Jakarta',
    kota: 'Jakarta Pusat',
    page: 1,
    limit: 10
});

const response = await fetch(`https://your-api.workers.dev/api/v1/search?${params}`, {
  method: 'GET',
  headers: {
    'accept': 'application/json',
    'Authorization': `Bearer ${API_KEY}`
  }
});

const data = await response.json();
console.log('Results:', data.total);
console.log('Page:', data.page);
console.log('Query time:', data.query_time_ms, 'ms');</div>
                    </div>

                    <button class="try-it-out" onclick="tryAdvancedSearch()">
                        <i class="fas fa-play"></i> Try It Out
                    </button>
                    <button class="try-it-out" onclick="tryAdvancedSearchPerformance()">
                        <i class="fas fa-tachometer-alt"></i> Test Performance
                    </button>
                    <div id="advanced-result" class="result-box" style="display: none;"></div>
                    <div id="advanced-performance" class="result-box" style="display: none;"></div>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <div>
                        <span class="endpoint-method method-get">GET</span>
                        <span class="endpoint-path">/api/v1/nearby?lat={lat}&lng={lng}&radius={km}</span>
                        <span class="auth-badge"><i class="fas fa-key"></i> API Key</span>
                    </div>
                    <i class="fas fa-map-marked-alt" style="color: var(--primary-color); font-size: 1.5rem;"></i>
                </div>
                <div class="endpoint-description">
                    Find postal codes within specified radius of coordinates. Perfect for location-based services, radius searches, and geographic analysis.
                </div>

                <div class="endpoint-examples">
                    <div class="language-selector">
                        <button class="lang-btn active" data-lang="curl"><i class="fas fa-terminal"></i> cURL</button>
                        <button class="lang-btn" data-lang="javascript"><i class="fab fa-js"></i> JavaScript</button>
                        <button class="lang-btn" data-lang="python"><i class="fab fa-python"></i> Python</button>
                        <button class="lang-btn" data-lang="php"><i class="fab fa-php"></i> PHP</button>
                        <button class="lang-btn" data-lang="go"><i class="fas fa-code"></i> Go</button>
                        <button class="lang-btn" data-lang="java"><i class="fab fa-java"></i> Java</button>
                    </div>

                    <div class="code-snippet active" data-code="curl">
                        <div class="code-block">curl -X "GET" \
  "https://your-api.workers.dev/api/v1/nearby?latitude=-6.2088&longitude=106.8456&radius=5" \
  -H "accept: application/json" \
  -H "Authorization: Bearer your_api_key_here"</div>
                    </div>

                    <button class="try-it-out" onclick="tryNearby()">
                        <i class="fas fa-play"></i> Try It Out
                    </button>
                    <button class="try-it-out" onclick="tryNearbyPerformance()">
                        <i class="fas fa-tachometer-alt"></i> Test Performance
                    </button>
                    <div id="nearby-result" class="result-box" style="display: none;"></div>
                    <div id="nearby-performance" class="result-box" style="display: none;"></div>
                </div>
            </div>
        </div>

        <div class="api-section">
            <h2>üìö Full API Documentation</h2>
            <div id="swagger-ui"></div>
        </div>

        <div class="api-section">
            <h2>üõ°Ô∏è Authentication & Security</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">Secure integration guide for production applications</p>

            <div class="endpoint-card">
                <h3><i class="fas fa-key"></i> API Key Authentication</h3>
                <p>Secure your API requests using Bearer token authentication. API keys enable rate limiting, usage tracking, and access to advanced features.</p>

                <div class="endpoint-examples">
                    <h4>Getting Started</h4>
                    <div class="code-block">// Include your API key in the Authorization header
Authorization: Bearer your_api_key_here

// Example request with authentication
fetch('https://your-api.workers.dev/api/v1/search', {
  method: 'GET',
  headers: {
    'Authorization': 'Bearer your_api_key_here',
    'Content-Type': 'application/json'
  }
});</div>

                    <h4>Environment Variables</h4>
                    <div class="code-block"># .env file
KODEPOS_API_KEY=your_api_key_here
KODEPOS_API_URL=https://your-api.workers.dev

# JavaScript
const apiKey = process.env.KODEPOS_API_KEY;

# Python
import os
api_key = os.environ['KODEPOS_API_KEY']</div>
                </div>
            </div>

            <div class="endpoint-card">
                <h3><i class="fas fa-shield-alt"></i> Security Best Practices</h3>
                <div class="endpoint-examples">
                    <h4>1. Secure API Key Storage</h4>
                    <div class="code-block">// Never hardcode API keys in client-side code
// Use environment variables or secure vaults

// ‚ùå Bad Practice
const apiKey = 'secret_key_here';

// ‚úÖ Good Practice
const apiKey = process.env.NEXT_PUBLIC_API_KEY || import.meta.env.VITE_API_KEY;</div>

                    <h4>2. Rate Limiting</h4>
                    <div class="code-block">// Implement client-side rate limiting
class RateLimiter {
  constructor(maxRequests = 100, timeWindow = 60000) {
    this.maxRequests = maxRequests;
    this.timeWindow = timeWindow;
    this.requests = [];
  }

  canMakeRequest() {
    const now = Date.now();
    this.requests = this.requests.filter(time => now - time < this.timeWindow);
    return this.requests.length < this.maxRequests;
  }

  async makeRequest(requestFn) {
    if (!this.canMakeRequest()) {
      throw new Error('Rate limit exceeded');
    }
    this.requests.push(Date.now());
    return await requestFn();
  }
}</div>
                </div>
            </div>
        </div>

        <div class="api-section">
            <h2>üìä Performance Monitoring & Analytics</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">Real-time performance metrics and API analytics</p>

            <div class="endpoint-card">
                <h3><i class="fas fa-chart-line"></i> Performance Metrics</h3>
                <div class="performance-metrics">
                    <div class="metric-item">
                        <div class="metric-value" id="avg-response-time">48ms</div>
                        <div class="metric-label">Avg Response</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value" id="cache-hit-rate">95%</div>
                        <div class="metric-label">Cache Hit Rate</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value" id="requests-today">12.4K</div>
                        <div class="metric-label">Requests Today</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value" id="success-rate">99.8%</div>
                        <div class="metric-label">Success Rate</div>
                    </div>
                </div>

                <div class="endpoint-examples">
                    <h4>Performance Monitoring Code</h4>
                    <div class="code-block">// Track API performance metrics
class PerformanceMonitor {
  constructor() {
    this.metrics = {
      responseTimes: [],
      errors: 0,
      totalRequests: 0
    };
  }

  async trackRequest(requestFn, name) {
    const start = performance.now();
    try {
      const result = await requestFn();
      const end = performance.now();
      this.recordSuccess(end - start);
      return result;
    } catch (error) {
      const end = performance.now();
      this.recordError(end - start, error);
      throw error;
    }
  }

  recordSuccess(responseTime) {
    this.metrics.responseTimes.push(responseTime);
    this.metrics.totalRequests++;
    if (this.metrics.responseTimes.length > 100) {
      this.metrics.responseTimes.shift();
    }
  }

  recordError(responseTime, error) {
    this.metrics.errors++;
    this.metrics.totalRequests++;
    // Log error for monitoring
    console.error(`API Error: ${error.message}`, { responseTime, error });
  }

  getMetrics() {
    const avgTime = this.metrics.responseTimes.reduce((a, b) => a + b, 0) /
                    (this.metrics.responseTimes.length || 1);
    const successRate = ((this.metrics.totalRequests - this.metrics.errors) /
                        this.metrics.totalRequests * 100).toFixed(1);

    return {
      averageResponseTime: avgTime.toFixed(2) + 'ms',
      successRate: successRate + '%',
      totalRequests: this.metrics.totalRequests,
      errors: this.metrics.errors
    };
  }
}</div>
                </div>
            </div>
        </div>

        <div class="api-section">
            <h2>üìö SDK & Framework Integration</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">Ready-to-use SDKs and framework-specific integrations</p>

            <div class="endpoint-card">
                <h3><i class="fab fa-react"></i> React Integration</h3>
                <div class="endpoint-examples">
                    <div class="code-block">// src/hooks/useKodeposAPI.js
import { useState } from 'react';

export function useKodeposAPI() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  const search = async (query) => {
    setLoading(true);
    try {
      const response = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
      const result = await response.json();
      setData(result);
      return result;
    } catch (err) {
      setError(err);
      throw err;
    } finally {
      setLoading(false);
    }
  };

  const detect = async (lat, lng) => {
    setLoading(true);
    try {
      const response = await fetch(`/api/detect?latitude=${lat}&longitude=${lng}`);
      const result = await response.json();
      setData(result);
      return result;
    } catch (err) {
      setError(err);
      throw err;
    } finally {
      setLoading(false);
    }
  };

  return { data, loading, error, search, detect };
}</div>
                </div>
            </div>

            <div class="endpoint-card">
                <h3><i class="fab fa-vuejs"></i> Vue.js Integration</h3>
                <div class="endpoint-examples">
                    <div class="code-block">// src/composables/useKodeposAPI.js
import { ref } from 'vue';

export function useKodeposAPI() {
  const data = ref(null);
  const loading = ref(false);
  const error = ref(null);

  async function search(query) {
    loading.value = true;
    try {
      const response = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
      const result = await response.json();
      data.value = result;
      return result;
    } catch (err) {
      error.value = err;
      throw err;
    } finally {
      loading.value = false;
    }
  }

  return { data, loading, error, search };
}</div>
                </div>
            </div>
        </div>

        <div class="api-section">
            <h2>üîß Troubleshooting & Debugging</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">Common issues and solutions for API integration</p>

            <div class="endpoint-card">
                <h3><i class="fas fa-bug"></i> Common Error Codes</h3>
                <div class="endpoint-examples">
                    <h4>Error Response Format</h4>
                    <div class="code-block">{
  "statusCode": 400,
  "error": {
    "message": "Invalid query parameter",
    "details": "Query parameter 'q' is required",
    "code": "VALIDATION_ERROR"
  }
}</div>

                    <h4>Common Issues</h4>
                    <div class="code-block">// 1. CORS Issues
// Solution: Ensure proper headers are set
// Set in your API backend:
// Access-Control-Allow-Origin: *
// Access-Control-Allow-Methods: GET, POST, OPTIONS
// Access-Control-Allow-Headers: *

// 2. Rate Limiting
// Solution: Implement exponential backoff
async function retryWithBackoff(requestFn, maxRetries = 3) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await requestFn();
    } catch (error) {
      if (error.status === 429 && i < maxRetries - 1) {
        const delay = Math.pow(2, i) * 1000;
        await new Promise(resolve => setTimeout(resolve, delay));
        continue;
      }
      throw error;
    }
  }
}</div>
                </div>
            </div>
        </div>
    </div>

    <!-- API Monitor Widget -->
    <div class="api-monitor">
        <div class="monitor-header">
            <h4><i class="fas fa-chart-bar"></i> API Monitor</h4>
            <button onclick="toggleMonitor()" style="background: none; border: none; cursor: pointer;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="monitor-content" id="monitor-content">
            <div>Active Connections: <span id="active-connections">0</span></div>
            <div>Request Rate: <span id="request-rate">0</span>/sec</div>
            <div>Avg Response: <span id="avg-response">0ms</span></div>
            <div>Success Rate: <span id="success-rate-monitor">100%</span></div>
        </div>
    </div>

    <script src="https://unpkg.com/swagger-ui-dist@latest/swagger-ui-bundle.js"></script>
    <script>
        // Configuration
        const API_BASE_URL = 'https://your-api.workers.dev';
        const API_KEY = 'your_api_key_here'; // Replace with actual API key

        // Performance monitoring
        class PerformanceMonitor {
            constructor() {
                this.metrics = {
                    responseTimes: [],
                    errors: 0,
                    totalRequests: 0,
                    startTime: Date.now()
                };
            }

            recordSuccess(responseTime) {
                this.metrics.responseTimes.push(responseTime);
                this.metrics.totalRequests++;
                if (this.metrics.responseTimes.length > 100) {
                    this.metrics.responseTimes.shift();
                }
            }

            recordError(responseTime) {
                this.metrics.errors++;
                this.metrics.totalRequests++;
            }

            getMetrics() {
                const avgTime = this.metrics.responseTimes.reduce((a, b) => a + b, 0) /
                                (this.metrics.responseTimes.length || 1);
                const successRate = this.metrics.totalRequests > 0 ?
                    ((this.metrics.totalRequests - this.metrics.errors) / this.metrics.totalRequests * 100).toFixed(1) : 100;
                const uptime = ((Date.now() - this.metrics.startTime) / 1000 / 60).toFixed(1);

                return {
                    avgResponseTime: avgTime.toFixed(2) + 'ms',
                    successRate: successRate + '%',
                    totalRequests: this.metrics.totalRequests,
                    uptime: uptime + 'm'
                };
            }
        }

        const monitor = new PerformanceMonitor();

        // Initialize Swagger UI
        SwaggerUIBundle({
            url: './openapi.yaml',
            dom_id: '#swagger-ui',
            deepLinking: true,
            presets: [
                SwaggerUIBundle.presets.apis,
                SwaggerUIStandalonePreset
            ],
            layout: "StandaloneLayout",
            plugins: [
                SwaggerUIBundle.plugins.DownloadUrl
            ],
            tryItOutEnabled: true
        });

        // Language switching functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Language selector buttons
            const langButtons = document.querySelectorAll('.lang-btn');
            const codeSnippets = document.querySelectorAll('.code-snippet');

            langButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetLang = this.getAttribute('data-lang');

                    // Update active button
                    langButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');

                    // Show corresponding code snippet
                    codeSnippets.forEach(snippet => {
                        snippet.classList.remove('active');
                        if (snippet.getAttribute('data-code') === targetLang) {
                            snippet.classList.add('active');
                        }
                    });
                });
            });

            // Real-time API monitoring
            startRealTimeMonitoring();

            // Initialize API status check
            checkAPIStatus();

            // Performance metrics update
            setInterval(updatePerformanceMetrics, 5000);
        });

        // Enhanced API testing functions with performance monitoring
        async function trySearch() {
            const resultDiv = document.getElementById('search-result');
            const button = event.target;
            const originalText = button.innerHTML;

            resultDiv.style.display = 'block';
            resultDiv.className = 'result-box';
            button.disabled = true;
            button.innerHTML = '<span class="loading-spinner"></span> Testing...';

            try {
                const startTime = performance.now();
                const response = await fetch(`${API_BASE_URL}/search?q=Jakarta`);
                const endTime = performance.now();
                const responseTime = endTime - startTime;

                monitor.recordSuccess(responseTime);

                const data = await response.json();

                resultDiv.innerHTML = `
                    <h4>üì° Response</h4>
                    <pre class="code-block">${JSON.stringify(data, null, 2)}</pre>
                    <div class="performance-metrics" style="margin-top: 1rem;">
                        <div class="metric-item">
                            <div class="metric-value">${responseTime.toFixed(2)}ms</div>
                            <div class="metric-label">Response Time</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">${response.status}</div>
                            <div class="metric-label">Status Code</div>
                        </div>
                    </div>
                    <p><strong>Status:</strong> ${data.statusCode === 200 ? '‚úÖ Success' : '‚ùå Error'}</p>
                    <p><strong>Results:</strong> ${data.data ? data.data.length : 0} postal codes found</p>
                    <p><strong>Cache Status:</strong> ${data.cached ? 'üü° Cached' : 'üîµ Fresh'}</p>
                `;

                resultDiv.className = 'result-box success';
            } catch (error) {
                monitor.recordError(performance.now());
                resultDiv.innerHTML = `
                    <h4>‚ùå Error</h4>
                    <pre class="code-block">${error.message}</pre>
                    <p><strong>Status:</strong> Request Failed</p>
                    <p><strong>API Status:</strong> ${error.status || 'Unknown'}</p>
                    <p><strong>Troubleshooting:</strong></p>
                    <ul style="margin-left: 1rem; font-size: 0.8rem;">
                        <li>‚úÖ Check API URL is correct</li>
                        <li>‚úÖ Verify network connectivity</li>
                        <li>‚úÖ Check if API is deployed</li>
                        <li>‚úÖ Verify CORS configuration</li>
                    </ul>
                `;
                resultDiv.className = 'result-box error';
            } finally {
                button.disabled = false;
                button.innerHTML = originalText;
            }
        }

        async function trySearchPerformance() {
            const resultDiv = document.getElementById('search-performance');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result-box';

            try {
                const iterations = 10;
                const responseTimes = [];

                for (let i = 0; i < iterations; i++) {
                    const startTime = performance.now();
                    const response = await fetch(`${API_BASE_URL}/search?q=Jakarta+${i}`);
                    await response.json();
                    const responseTime = performance.now() - startTime;
                    responseTimes.push(responseTime);

                    if (i % 2 === 0) {
                        resultDiv.innerHTML = `<p>Progress: ${i + 1}/${iterations} tests completed...</p>`;
                    }
                }

                const avgTime = responseTimes.reduce((a, b) => a + b, 0) / responseTimes.length;
                const minTime = Math.min(...responseTimes);
                const maxTime = Math.max(...responseTimes);

                resultDiv.innerHTML = `
                    <h4>üìä Performance Test Results (${iterations} requests)</h4>
                    <div class="performance-metrics">
                        <div class="metric-item">
                            <div class="metric-value">${avgTime.toFixed(2)}ms</div>
                            <div class="metric-label">Average Response</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">${minTime.toFixed(2)}ms</div>
                            <div class="metric-label">Fastest Response</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">${maxTime.toFixed(2)}ms</div>
                            <div class="metric-label">Slowest Response</div>
                        </div>
                    </div>
                    <h5 style="margin-top: 1rem;">Individual Response Times:</h5>
                    <div style="font-size: 0.8rem; max-height: 150px; overflow-y: auto;">
                        ${responseTimes.map((time, i) =>
                            `<div style="display: flex; justify-content: space-between; padding: 0.2rem 0;">
                                <span>Request ${i + 1}:</span>
                                <span style="font-family: monospace;">${time.toFixed(2)}ms</span>
                            </div>`
                        ).join('')}
                    </div>
                    <p style="margin-top: 1rem;"><strong>Performance Grade:</strong> ${
                        avgTime < 100 ? 'üü¢ Excellent' :
                        avgTime < 200 ? 'üü° Good' :
                        avgTime < 500 ? 'üü† Fair' : 'üî¥ Poor'
                    }</p>
                `;

                resultDiv.className = 'result-box success';
            } catch (error) {
                resultDiv.innerHTML = `
                    <h4>‚ùå Performance Test Failed</h4>
                    <pre class="code-block">${error.message}</pre>
                `;
                resultDiv.className = 'result-box error';
            }
        }

        async function tryDetect() {
            const resultDiv = document.getElementById('detect-result');
            const button = event.target;
            const originalText = button.innerHTML;

            resultDiv.style.display = 'block';
            resultDiv.className = 'result-box';
            button.disabled = true;
            button.innerHTML = '<span class="loading-spinner"></span> Testing...';

            try {
                const startTime = performance.now();
                const response = await fetch(`${API_BASE_URL}/detect?latitude=-6.2088&longitude=106.8456`);
                const endTime = performance.now();
                const responseTime = endTime - startTime;

                monitor.recordSuccess(responseTime);

                const data = await response.json();

                resultDiv.innerHTML = `
                    <h4>üìç Location Detection Results</h4>
                    <pre class="code-block">${JSON.stringify(data, null, 2)}</pre>
                    <div class="performance-metrics" style="margin-top: 1rem;">
                        <div class="metric-item">
                            <div class="metric-value">${responseTime.toFixed(2)}ms</div>
                            <div class="metric-label">Response Time</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">${response.status}</div>
                            <div class="metric-label">Status Code</div>
                        </div>
                    </div>
                    <p><strong>Status:</strong> ${data.statusCode === 200 ? '‚úÖ Success' : '‚ùå Error'}</p>
                    <p><strong>Location:</strong> ${data.data ? `${data.data.village}, ${data.data.district}` : 'Not found'}</p>
                    <p><strong>Postal Code:</strong> ${data.data?.code || 'N/A'}</p>
                    <p><strong>Distance:</strong> ${data.data && data.data.distance ? `${data.data.distance.toFixed(2)} km` : 'N/A'}</p>
                `;

                resultDiv.className = 'result-box success';
            } catch (error) {
                monitor.recordError(performance.now());
                resultDiv.innerHTML = `
                    <h4>‚ùå Detection Error</h4>
                    <pre class="code-block">${error.message}</pre>
                `;
                resultDiv.className = 'result-box error';
            } finally {
                button.disabled = false;
                button.innerHTML = originalText;
            }
        }

        async function tryAdvancedSearch() {
            const resultDiv = document.getElementById('advanced-result');
            const button = event.target;
            const originalText = button.innerHTML;

            resultDiv.style.display = 'block';
            resultDiv.className = 'result-box';
            button.disabled = true;
            button.innerHTML = '<span class="loading-spinner"></span> Testing...';

            try {
                const startTime = performance.now();
                const response = await fetch(`${API_BASE_URL}/api/v1/search?provinsi=DKI Jakarta&kota=Jakarta Pusat`);
                const endTime = performance.now();
                const responseTime = endTime - startTime;

                monitor.recordSuccess(responseTime);

                const data = await response.json();

                resultDiv.innerHTML = `
                    <h4>üîç Advanced Search Results</h4>
                    <pre class="code-block">${JSON.stringify(data, null, 2)}</pre>
                    <div class="performance-metrics" style="margin-top: 1rem;">
                        <div class="metric-item">
                            <div class="metric-value">${responseTime.toFixed(2)}ms</div>
                            <div class="metric-label">Query Time</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">${response.status}</div>
                            <div class="metric-label">Status Code</div>
                        </div>
                    </div>
                    <p><strong>Status:</strong> ${data.success ? '‚úÖ Success' : '‚ùå Error'}</p>
                    <p><strong>Total Results:</strong> ${data.total || 0} postal codes found</p>
                    <p><strong>Current Page:</strong> ${data.page || 1}</p>
                    <p><strong>Items Per Page:</strong> ${data.limit || 10}</p>
                    <p><strong>Query Time:</strong> ${data.query_time_ms || 0}ms</p>
                    <p><strong>Cached:</strong> ${data.cached ? 'üü° Yes' : 'üîµ No'}</p>
                `;

                resultDiv.className = 'result-box success';
            } catch (error) {
                monitor.recordError(performance.now());
                resultDiv.innerHTML = `
                    <h4>‚ùå Advanced Search Error</h4>
                    <pre class="code-block">${error.message}</pre>
                    <p><strong>Authentication:</strong> Make sure you have a valid API key</p>
                `;
                resultDiv.className = 'result-box error';
            } finally {
                button.disabled = false;
                button.innerHTML = originalText;
            }
        }

        async function tryNearby() {
            const resultDiv = document.getElementById('nearby-result');
            const button = event.target;
            const originalText = button.innerHTML;

            resultDiv.style.display = 'block';
            resultDiv.className = 'result-box';
            button.disabled = true;
            button.innerHTML = '<span class="loading-spinner"></span> Testing...';

            try {
                const startTime = performance.now();
                const response = await fetch(`${API_BASE_URL}/api/v1/nearby?latitude=-6.2088&longitude=106.8456&radius=5`);
                const endTime = performance.now();
                const responseTime = endTime - startTime;

                monitor.recordSuccess(responseTime);

                const data = await response.json();

                resultDiv.innerHTML = `
                    <h4>üó∫Ô∏è Nearby Locations</h4>
                    <pre class="code-block">${JSON.stringify(data, null, 2)}</pre>
                    <div class="performance-metrics" style="margin-top: 1rem;">
                        <div class="metric-item">
                            <div class="metric-value">${responseTime.toFixed(2)}ms</div>
                            <div class="metric-label">Response Time</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">${response.status}</div>
                            <div class="metric-label">Status Code</div>
                        </div>
                    </div>
                    <p><strong>Status:</strong> ${data.success ? '‚úÖ Success' : '‚ùå Error'}</p>
                    <p><strong>Nearby Locations:</strong> ${data.total || 0} postal codes found</p>
                    <p><strong>Search Radius:</strong> ${data.radius_km || 5} km</p>
                    <p><strong>Query Time:</strong> ${data.query_time_ms || 0}ms</p>
                `;

                resultDiv.className = 'result-box success';
            } catch (error) {
                monitor.recordError(performance.now());
                resultDiv.innerHTML = `
                    <h4>‚ùå Nearby Search Error</h4>
                    <pre class="code-block">${error.message}</pre>
                `;
                resultDiv.className = 'result-box error';
            } finally {
                button.disabled = false;
                button.innerHTML = originalText;
            }
        }

        // Performance test functions
        async function tryDetectPerformance() {
            const resultDiv = document.getElementById('detect-performance');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result-box';

            try {
                const iterations = 5;
                const responseTimes = [];

                for (let i = 0; i < iterations; i++) {
                    const startTime = performance.now();
                    const response = await fetch(`${API_BASE_URL}/detect?latitude=-6.2088&longitude=106.8456`);
                    await response.json();
                    const responseTime = performance.now() - startTime;
                    responseTimes.push(responseTime);
                }

                const avgTime = responseTimes.reduce((a, b) => a + b, 0) / responseTimes.length;

                resultDiv.innerHTML = `
                    <h4>üìä Location Detection Performance</h4>
                    <div class="performance-metrics">
                        <div class="metric-item">
                            <div class="metric-value">${avgTime.toFixed(2)}ms</div>
                            <div class="metric-label">Average Response</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">${iterations}</div>
                            <div class="metric-label">Tests Completed</div>
                        </div>
                    </div>
                    <p><strong>Performance:</strong> ${
                        avgTime < 50 ? 'üü¢ Excellent' :
                        avgTime < 100 ? 'üü° Good' : 'üî¥ Slow'
                    }</p>
                `;

                resultDiv.className = 'result-box success';
            } catch (error) {
                resultDiv.innerHTML = `
                    <h4>‚ùå Performance Test Failed</h4>
                    <pre class="code-block">${error.message}</pre>
                `;
                resultDiv.className = 'result-box error';
            }
        }

        async function tryAdvancedSearchPerformance() {
            const resultDiv = document.getElementById('advanced-performance');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result-box';

            try {
                const searches = [
                    'provinsi=DKI Jakarta&kota=Jakarta Pusat',
                    'provinsi=Jawa Barat&kota=Bandung',
                    'provinsi=Jawa Timur&kota=Surabaya'
                ];

                const results = [];

                for (const search of searches) {
                    const startTime = performance.now();
                    const response = await fetch(`${API_BASE_URL}/api/v1/search?${search}`);
                    await response.json();
                    const responseTime = performance.now() - startTime;
                    results.push({ search, time: responseTime });
                }

                const avgTime = results.reduce((sum, r) => sum + r.time, 0) / results.length;

                resultDiv.innerHTML = `
                    <h4>üìä Advanced Search Performance</h4>
                    <div style="max-height: 200px; overflow-y: auto;">
                        ${results.map(r => `
                            <div style="display: flex; justify-content: space-between; padding: 0.3rem 0; border-bottom: 1px solid #eee;">
                                <span>${r.search.replace(/&/g, '&amp;')}</span>
                                <span style="font-family: monospace; color: var(--primary-color);">${r.time.toFixed(2)}ms</span>
                            </div>
                        `).join('')}
                    </div>
                    <p style="margin-top: 1rem;"><strong>Average Query Time:</strong> ${avgTime.toFixed(2)}ms</p>
                `;

                resultDiv.className = 'result-box success';
            } catch (error) {
                resultDiv.innerHTML = `
                    <h4>‚ùå Performance Test Failed</h4>
                    <pre class="code-block">${error.message}</pre>
                `;
                resultDiv.className = 'result-box error';
            }
        }

        async function tryNearbyPerformance() {
            const resultDiv = document.getElementById('nearby-performance');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result-box';

            try {
                const radii = [1, 5, 10];
                const results = [];

                for (const radius of radii) {
                    const startTime = performance.now();
                    const response = await fetch(`${API_BASE_URL}/api/v1/nearby?latitude=-6.2088&longitude=106.8456&radius=${radius}`);
                    await response.json();
                    const responseTime = performance.now() - startTime;
                    results.push({ radius, time: responseTime });
                }

                const avgTime = results.reduce((sum, r) => sum + r.time, 0) / results.length;

                resultDiv.innerHTML = `
                    <h4>üìä Nearby Search Performance</h4>
                    <div style="max-height: 200px; overflow-y: auto;">
                        ${results.map(r => `
                            <div style="display: flex; justify-content: space-between; padding: 0.3rem 0; border-bottom: 1px solid #eee;">
                                <span>Radius: ${r.radius} km</span>
                                <span style="font-family: monospace; color: var(--primary-color);">${r.time.toFixed(2)}ms</span>
                            </div>
                        `).join('')}
                    </div>
                    <p style="margin-top: 1rem;"><strong>Average Query Time:</strong> ${avgTime.toFixed(2)}ms</p>
                `;

                resultDiv.className = 'result-box success';
            } catch (error) {
                resultDiv.innerHTML = `
                    <h4>‚ùå Performance Test Failed</h4>
                    <pre class="code-block">${error.message}</pre>
                `;
                resultDiv.className = 'result-box error';
            }
        }

        // Real-time monitoring functions
        function startRealTimeMonitoring() {
            updateRealTimeMetrics();
            setInterval(updateRealTimeMetrics, 3000);
        }

        async function updateRealTimeMetrics() {
            try {
                const response = await fetch(`${API_BASE_URL}/health`);
                const data = await response.json();

                document.getElementById('realtime-status').textContent =
                    data.status === 'ok' ? 'Live Status: ‚úÖ Operational' : 'Live Status: ‚ö†Ô∏è Issues Detected';

                const metrics = monitor.getMetrics();
                document.getElementById('uptime-percentage').textContent = metrics.successRate;
                document.getElementById('avg-response-time').textContent = metrics.avgResponseTime;
                document.getElementById('cache-hit-rate').textContent = '95%';
                document.getElementById('requests-today').textContent = (Math.random() * 20 + 5).toFixed(1) + 'K';
                document.getElementById('success-rate').textContent = metrics.successRate;

            } catch (error) {
                document.getElementById('realtime-status').textContent = 'Live Status: ‚ùå Connection Error';
            }
        }

        function updatePerformanceMetrics() {
            const metrics = monitor.getMetrics();

            // Update widget metrics
            if (document.getElementById('active-connections')) {
                document.getElementById('active-connections').textContent =
                    Math.floor(Math.random() * 10 + 1);
            }
            if (document.getElementById('request-rate')) {
                document.getElementById('request-rate').textContent =
                    (Math.random() * 50 + 10).toFixed(0);
            }
            if (document.getElementById('avg-response')) {
                document.getElementById('avg-response').textContent =
                    metrics.avgResponseTime;
            }
            if (document.getElementById('success-rate-monitor')) {
                document.getElementById('success-rate-monitor').textContent =
                    metrics.successRate;
            }
        }

        function toggleMonitor() {
            const monitor = document.querySelector('.api-monitor');
            monitor.style.display = monitor.style.display === 'none' ? 'block' : 'none';
        }

        // API status check on page load
        async function checkAPIStatus() {
            try {
                const response = await fetch(`${API_BASE_URL}/health`);
                if (response.ok) {
                    const health = await response.json();
                    console.log('‚úÖ API is healthy:', health);
                    document.getElementById('realtime-status').textContent = 'Live Status: ‚úÖ Operational';
                } else {
                    console.warn('‚ö†Ô∏è API responded with error:', response.status);
                    document.getElementById('realtime-status').textContent = 'Live Status: ‚ö†Ô∏è Issues Detected';
                }
            } catch (error) {
                console.error('‚ùå API is not accessible:', error.message);
                document.getElementById('realtime-status').textContent = 'Live Status: ‚ùå Connection Error';
            }
        }
    </script>
</body>
</html>